<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="./css/quizdash.css">
    <link rel="stylesheet"
        href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200" />
    <link rel="icon" href="../public/assets/logo.webp">
    <!-- <script src="./js/quizdash.js"></script> -->

    <script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.18.1/moment.min.js"></script>
    <script src="http://www.chartjs.org/dist/2.7.1/Chart.js"></script>
    <!-- <script src="http://www.chartjs.org/samples/latest/utils.js"></script> -->
    <link href="https://fonts.googleapis.com/css2?family=Ubuntu:wght@300&display=swap" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link rel="stylesheet" href="./css/dashboard.css">
    <style>
        canvas {
            -moz-user-select: none;
            -webkit-user-select: none;
            -ms-user-select: none;
        }
    </style>

    
    <title>Quiz | Valorant</title>
</head>

<body >

    <header>

        <div class="header"> <!--DIV HEADER-->
            <div class="card-logo">
                <img class="imagem-logo" src="./assets/logo.webp">
            </div>
            <div class="container"> <!--DIV CONTAINER-->
                <h1 class="logo-cold">Valo<span class="logo-tech">Info</span></h1>
    
                <div class="navbar"> <!--DIV NAVBAR-->
                    <ul>
                        <li class="Home">
                            <a href="#">
                                Home
                            </a>
                        </li>
    
                        <li class="sobre">
                            <a href="#sobre-nos">
                                Sobre mim
                            </a>
                        </li>
    
                        <li class="informacoes">
                            <a href="#informacoes">
                                Informações
                            </a>
                        </li>
    
    
    
                    </ul>
                </div>
                <div class="cadastro-login"> <!--DIV CADASTRO-LOGIN-->
                    <ul>
                        <li class="borda-cadastro">
                            <a href="#">
                                <b><i class="uil uil-signin icon-cadastro"></i></b>Cadastre-se
                            </a>
                        </li>
    
                        <li><a href="#">
                                <b><b><i class="uil uil-sign-in-alt icon-login"></i></b>Login</b>
                            </a>
                        </li>
                    </ul>
    
                </div> <!--FIM CADASTRO-LOGIN-->
            </div> <!--FIM DIV CONTAINER-->
        </div> <!--FIM DIV HEADER-->
    
    
    </header>

    
        <h2 class="titulo">QUIZ</h2>
    

   

    <div class="conteinerr">
        <section id="p0">
            <h3>1 - Com quantos créditos você inicia o primeiro round?</h3>
            <label>
                <input type="radio" value="1" name="p0" onclick="resposta(0,this)"> 900
            </label> <label>
                <input type="radio" value="2" name="p0" onclick="resposta(0,this)"> 600
            </label> <label>
                <input type="radio" value="3" name="p0" onclick="resposta(0,this)"> 500
            </label> 
            </label> <label>
                <input type="radio" value="4" name="p0" onclick="resposta(0,this)"> 800
        </label> 
        </section> 
        
        <section id="p1">
            <h3>2 - Qual foi a primeira skin de vandal que estáva desde o beta e se permanece até hoje?</h3>
            <label>
                <input type="radio" value="1" name="p1" onclick="resposta(1,this)"> Prelúdio do Caos
            </label> <label>
                <input type="radio" value="2" name="p1" onclick="resposta(1,this)"> Netuno
            </label> <label>
                <input type="radio" value="3" name="p1" onclick="resposta(1,this)"> Saqueadora
            </label> 
            <label>
                <input type="radio" value="4" name="p1" onclick="resposta(1,this)"> Sublime
            </label> 
        </section> 
        
        <section id="p2">
            <h3>3 - Em que ano houve o lançamento oficial do Valorant?</h3>
            <label>
                <input type="radio" value="1" name="p2" onclick="resposta(2,this)"> 2023
            </label> <label>
                <input type="radio" value="2" name="p2" onclick="resposta(2,this)"> 2020
            </label> <label>
                <input type="radio" value="3" name="p2" onclick="resposta(2,this)"> 2021
            </label> <label>
                <input type="radio" value="4" name="p2" onclick="resposta(2,this)"> 2022
            </label>
        </section> 
        
        <section id="p3">
            <h3>4 - Qual é o verdadeiro nome da Viper?</h3>
            <label>
                <input type="radio" value="1" name="p3" onclick="resposta(3,this)"> Sabine
            </label> <label>
                <input type="radio" value="2" name="p3" onclick="resposta(3,this)"> Samarah
            </label> <label>
                <input type="radio" value="3" name="p3" onclick="resposta(3,this)"> Sara
            </label> 
            <label>
                <input type="radio" value="4" name="p3" onclick="resposta(3,this)"> Samira
            </label>
        </section>
        
        <section id="p4">
            <h3>5 - Qual é o tipo de Agente que é feito para abrir o bomb?</h3>
            <label>
                <input type="radio" value="1" name="p4" onclick="resposta(4,this)"> Controlador
            </label> <label>
                <input type="radio" value="2" name="p4" onclick="resposta(4,this)"> Sentinela
            </label> <label>
                <input type="radio" value="3" name="p4" onclick="resposta(4,this)"> Iniciador
            </label> 
            <label>
                <input type="radio" value="4" name="p4" onclick="resposta(4,this)"> Duelista
            </label>
        </section>
        
        <section id="p5">
            <h3>6 - Qual é a arma mais cara do jogo?</h3>
            <label>
                <input type="radio" value="1" name="p5" onclick="resposta(5,this)"> Vandal e Phantom
            </label> <label>
                <input type="radio" value="2" name="p5" onclick="resposta(5,this)"> Operator
            </label> <label>
                <input type="radio" value="3" name="p5" onclick="resposta(5,this)"> Ares
            </label> 
            <label>
                <input type="radio" value="4" name="p5" onclick="resposta(5,this)"> Odin
            </label>
        </section>
        
        <section id="p6">
            <h3>7 - Quantos agentes tem no Valorant?</h3>
            <label>
                <input type="radio" value="1" name="p6" onclick="resposta(6,this)"> 20
            </label> <label>
                <input type="radio" value="2" name="p6" onclick="resposta(6,this)"> 26
            </label> <label>
                <input type="radio" value="3" name="p6" onclick="resposta(6,this)"> 23
            </label> 
            <label>
                <input type="radio" value="4" name="p6" onclick="resposta(6,this)"> 28
            </label>
        </section>
        
        <section id="p7">
            <h3>8 - Qual classe é focada em Smokes?</h3>
            <label>
                <input type="radio" value="1" name="p7" onclick="resposta(7,this)"> Controlador
            </label> <label>
                <input type="radio" value="2" name="p7" onclick="resposta(7,this)"> Iniciador
            </label> <label>
                <input type="radio" value="3" name="p7" onclick="resposta(7,this)"> Sentinela
            </label> 
            <label>
                <input type="radio" value="4" name="p7" onclick="resposta(7,this)"> Duelista
            </label>
        </section>
        
        <section id="p8">
            <h3>9 - Quanto de dinheiro um player ganha ao abater um inimigo no roud passado?</h3>
            <label>
                <input type="radio" value="1" name="p8" onclick="resposta(8,this)"> 350
            </label> <label>
                <input type="radio" value="2" name="p8" onclick="resposta(8,this)"> 200
            </label> <label>
                <input type="radio" value="3" name="p8" onclick="resposta(8,this)"> 250
            </label> 
            <label>
                <input type="radio" value="4" name="p8" onclick="resposta(8,this)"> 300
            </label>
        </section>
        
        <section id="p9">
            <h3>10 - Qual a arma mais barata do Valorant?</h3>
            <label>
                <input type="radio" value="1" name="p9" onclick="resposta(9,this)"> Ghost
            </label> <label>
                <input type="radio" value="2" name="p9" onclick="resposta(9,this)"> Shorty
            </label> <label>
                <input type="radio" value="3" name="p9" onclick="resposta(9,this)"> Classic
            </label> 
            <label>
                <input type="radio" value="4" name="p9" onclick="resposta(9,this)"> Frenzy
            </label>
        </section>
        
        <section id="p10">
            <h3>11 - Qual o maior rank do valorant?</h3>
            <label>
                <input type="radio" value="1" name="p10" onclick="resposta(10,this)"> Radiante
            </label> <label>
                <input type="radio" value="2" name="p10" onclick="resposta(10,this)"> Global
            </label> <label>
                <input type="radio" value="3" name="p10" onclick="resposta(10,this)"> Grao Mestre
            </label>
            <label>
                <input type="radio" value="4" name="p10" onclick="resposta(10,this)"> Challenger
            </label> 
        </section>
        
        <section id="p11">
            <h3>12 - O valorant tem quantos mapas?</h3>
            <label>
                <input type="radio" value="1" name="p11" onclick="resposta(11,this)"> 10
            </label> <label>
                <input type="radio" value="2" name="p11" onclick="resposta(11,this)"> 11
            </label> <label>
                <input type="radio" value="3" name="p11" onclick="resposta(11,this)"> 8
            </label>
            <label>
                <input type="radio" value="4" name="p11" onclick="resposta(11,this)"> 9
            </label> 
        </section>
        
        <section id="p12">
            <h3>13 - Qual o último personagem lançado?</h3>
            <label>
                <input type="radio" value="1" name="p12" onclick="resposta(12,this)">Deadlock
            </label> <label>
                <input type="radio" value="2" name="p12" onclick="resposta(12,this)"> Iso
            </label> <label>
                <input type="radio" value="3" name="p12" onclick="resposta(12,this)"> Fade
            </label>
            <label>
                <input type="radio" value="4" name="p12" onclick="resposta(12,this)"> Gekko
            </label> 
        </section>
        
        <section id="p13">
            <h3>14 - Termine o nome do personagem
                Kill...</h3>
            <label>
                <input type="radio" value="1" name="p13" onclick="resposta(13,this)"> Fill
            </label> <label>
                <input type="radio" value="2" name="p13" onclick="resposta(13,this)"> Roy
            </label> <label>
                <input type="radio" value="3" name="p13" onclick="resposta(13,this)"> Joy
            </label> 
            <label>
                <input type="radio" value="4" name="p13" onclick="resposta(13,this)"> Dead
            </label>
        </section>
        
        <section id="p14">
            <h3>15 - Quais Os Três Mapas Que Estão Desde o Beta?</h3>
            <label>
                <input type="radio" value="1" name="p14" onclick="resposta(14,this)"> Bind,Haven e Split
            </label> <label>
                <input type="radio" value="2" name="p14" onclick="resposta(14,this)"> Breeze,Ascent e Fracture
            </label> <label>
                <input type="radio" value="3" name="p14" onclick="resposta(14,this)"> Icebox,Fracture e Pearl
            </label> 
            <label>
                <input type="radio" value="4" name="p14" onclick="resposta(14,this)"> Ascent,Bind e Haven
            </label>
        </section>
        
        
        <button onclick="corrigir()">Corrigir</button>
        <h2>Quantidade acertadas: <span id="resultado"></span></h2>
    </div >
<div class="canvas">
    <canvas id="myChart"style="position: relative;"></canvas>
        
    </div>

    <div>
        <canvas id="myChart2"style="position: relative; "></canvas>
    </div>

</body>

    
    <script>

var corretas = [4, 3, 2, 1, 4, 2, 3, 1, 2, 3, 1, 4, 2, 3, 1]
var opcao = []
var acertos = 0


function resposta(num_pergunta, selecionada) {
  opcao[num_pergunta] = selecionada.value;

  id = "p" + num_pergunta;

  labels = document.getElementById(id).childNodes;
  labels[3].style.backgroundColor = "#adb8b1";
  labels[5].style.backgroundColor = "#adb8b1";
  labels[7].style.backgroundColor = "#adb8b1";


  selecionada.parentNode.style.backgroundColor = "#808080"
}

function corrigir() {
  
  acertos = 0;
  for (i = 0; i < corretas.length; i++) {
    if (corretas[i] == opcao[i]) {
      acertos++;
    }
  }
  document.getElementById("resultado").innerHTML = acertos

  var idJogador = sessionStorage.getItem("ID_JOGADOR");;

  fetch("/usuario/cadastrarPontuacao", {
    method: "POST",
    headers: {
      "Content-Type": "application/json",
    },
    body: JSON.stringify({
      pontuacao: acertos,
      idJogador: idJogador,
    }),
  })
    .then(function (resposta) {
      console.log("resposta: ", resposta);
      if (resposta.ok) {
        console.log(JSON.stringify(resposta))
        resposta.json().then(
          resposta => {
                  var pontuacao = [resposta[0].pontuacao];
                  chartAcerto.data.labels .push([resposta[0].nome])

                  chartAcerto.data.datasets[0].data .push(pontuacao)
               
                  chartAcerto.update();
            // console.log(`Dados recebidos: ${JSON.stringify(resposta)}`);
          }
          )

        // setTimeout(() => {
        //   window.location = "./quizdash.html";

        // }, "5000");
      } else {
        throw "Houve um erro ao tentar realizar o cadastro!";
      }
    })
    .catch(function (resposta) {
      console.log(`#ERRO: ${resposta}`);
    });

  return false;
}

// const image = document.querySelector("img"),
// input = document.querySelector("input");

// input.addEventListener("change", () => {
// image.src = URL.createObjectURL(input.files[0]);
// });


        const dataDashboardHtml = {
        labels: [],
        datasets: [{
            label: 'Acertos',
            backgroundColor: '#00d9ff',
            data: [],
            borderWidth: 1,
        },
        ]
    }

    const dataDashboardCss = {
        labels: [],
        datasets: [{
            label: 'Acertos',
            backgroundColor: '#00d9ff',
            data: [],
            borderWidth: 1,
        },
        ]
    }

    const options = {
         
        scales: {
            x: {
                grid: {
                    color: 'white' // Mudar a cor da grade no eixo x
                },
                ticks: {
                    color: 'white' // Cor das labels no eixo x
                }
            },
            y: {
                grid: {
                    color: 'white' // Mudar a cor da grade no eixo y
                },
                ticks: {
                    color: 'white' // Cor das labels no eixo x
                }
            }
        },
        plugins: {
            legend: {
                display: true,
                labels: {
                    color: 'white'
                }
            }
        }
    }

    const ctx = document.getElementById('myChart');
    var chartAcerto = new Chart(ctx, {
        type: 'bar',
        data: dataDashboardHtml,
        options
    });

    const ctx2 = document.getElementById('myChart2');
    var cssChart = new Chart(ctx2, {
        type: 'bar',
        data: dataDashboardCss,
        options
    });


    function dado() {
        dados.style.display = 'block'
        analytics.style.display = 'none'
    }

    // async function verpontuacao() {
    //     dados.style.display = 'none'
    //     analytics.style.display = 'block'
    //     var idJogador = sessionStorage.ID_JOGADOR

    //     var resultado = await fetch("/dashboard/pegarDadosQuiz", {
    //         method: "GET",
    //         headers: {
    //             "Content-Type": "application/json",
    //         },
    //         body: JSON.stringify({
    //             idJogadorServer: idJogador,
    //             pontuacao:acertos
    //         }),
    //     });

    //     const resposta = await resultado.json();

    //     tHtml.innerHTML = resposta.tentativaQuizHtml
    //     // tCss.innerHTML = resposta.tentativaQuizCss
    //     // tTotal.innerHTML = resposta.totalQuizRealizado


    //     var resultadoDashboard = await fetch("/dashboard/pegarDadosQuiz", {
    //         method: "GET",
    //         headers: {
    //             "Content-Type": "application/json",
    //         },
    //         body: JSON.stringify({
    //             idJogadorServer: idJogador,
    //             pontuacao:acertos
    //         }),
    //     });

    //     var response = await resultadoDashboard.json();

    //     onUpdateChartHtml(response);
    //     // onUpdateChartCSS(response);
    // }

    const onUpdateChartHtml = ({ dadosQuizHtml }) => {
        var labels = dadosQuizHtml.map((args, index) => `Tentativa - ${index + 1}`)

        var acertos = dadosQuizHtml.map(args => args.acertos);
        // var errosHtml = dadosQuizHtml.map(args => args.qtdErrosHtml);

        dataDashboardHtml.labels = labels;
        dataDashboardHtml.datasets[0].data = acertos;
        // dataDashboardHtml.datasets[1].data = errosHtml;

        htmlChart.update();
    };

    // const onUpdateChartCSS = ({ dadosQuizCss }) => {
    //     var labels = dadosQuizCss.map((args, index) => `Tentativa - ${index + 1}`)

    //     var acertosCss = dadosQuizCss.map(args => args.qtdAcertosCss);
    //     var errosCss = dadosQuizCss.map(args => args.qtdErrosCss);

    //     dataDashboardCss.labels = labels;
    //     dataDashboardCss.datasets[0].data = acertosCss;
    //     dataDashboardCss.datasets[1].data = errosCss;

    //     cssChart.update();
    // };


    </script>